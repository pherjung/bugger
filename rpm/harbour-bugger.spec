# 
# Do NOT Edit the Auto-generated Part!
# Generated by: spectacle version 0.32
# 

Name:       harbour-bugger

# >> macros
# << macros

Summary:    Bug reporting helper
Version:    0.9.3
Release:    0
Group:      Applications
License:    ASL 2.0
BuildArch:  noarch
URL:        https://github.com/sailfishos-chum/bugger
Source0:    %{name}-%{version}.tar.gz
Source100:  harbour-bugger.yaml
Source101:  harbour-bugger-rpmlintrc
Requires:   libsailfishapp-launcher
BuildRequires:  qt5-qttools-linguist
BuildRequires:  qt5-qmake
BuildRequires:  sailfish-svg2png
BuildRequires:  qml-rpm-macros
BuildRequires:  desktop-file-utils

%description
Bugger is little tool to assist reporting bugs on
https://forum.sailfishos.org, following a more or less standardized
template.
Reporting bugs in this way should improve Jollas ability to pick them up
and track them internally.
For more information, see Help link in the description


%if "%{?vendor}" == "chum"
PackageName: Bugger
Type: desktop-application
Categories:
 - Utility
Custom:
  Repo: https://github.com/sailfishos-chum/bugger
Url:
  Help: https://forum.sailfishos.org/t/10935
%endif


%prep
%setup -q -n %{name}-%{version}

# >> setup
# << setup

%build
# >> build pre
# << build pre



# >> build post
# << build post

%install
rm -rf %{buildroot}
# >> install pre
# lrelease -silent -removeidentical translations/*
lrelease -silent -removeidentical *.pro
# << install pre

# >> install post

%__install -m 644 -D %{name}.desktop %{buildroot}%{_datadir}/applications/%{name}.desktop
%__install -m 644 -D qml/%{name}.qml %{buildroot}%{_datadir}/%{name}/qml/%{name}.qml
#for f in qml/cover/*.qml qml/components/qmldir qml/components/*/*.qml qml/components/*.qml qml/pages/*.qml; do
for f in $(find qml/ -type f -name "*.qml" -o -name qmldir -o -name "*.png"); do
%__install -m 644 -D ${f} %{buildroot}%{_datadir}/%{name}/${f}
done
for f in translations/*.qm; do
%__install -m 644 -D ${f} %{buildroot}%{_datadir}/%{name}/${f}
done

#for s in 512 256 128 64 48; do
#%%__install -m 644 -D icons/%%{name}-${s}.png %%{buildroot}%%{_datadir}/icons/hicolor/${s}x${s}/apps/%%{name}.png
#done

# mangle version info
sed -i -e "s/unreleased/%{version}/" %{buildroot}%{_datadir}/%{name}/qml/%{name}.qml
# << install post

desktop-file-install --delete-original       \
  --dir %{buildroot}%{_datadir}/applications             \
   %{buildroot}%{_datadir}/applications/*.desktop

%files
%defattr(-,root,root,-)
%license LICENSE
%{_datadir}/applications/%{name}.desktop
%dir %{_datadir}/%{name}
%{_datadir}/%{name}/translations/*.qm
%{_datadir}/%{name}/qml/*
# >> files
# << files
